{{ define "main" }}
<div class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="gradient-text">Brandon JP Lambert</span>
                <span class="subtitle">MA-TESOL | Fourth-Generation Educator</span>
            </h1>
            <p class="hero-description">
                {{ if eq .Language.Lang "es" }}
                Educador de cuarta generaci√≥n con MA-TESOL y 10 a√±os en educaci√≥n de idiomas y edtech - desde ense√±ar cursos de posgrado enfocados en arte y dise√±o hasta definir curr√≠culos para m√°s de 800,000 j√≥venes estudiantes chinos, dise√±ar programas especializados para diplom√°ticos, entrenar instructores de VR, y desarrollar herramientas personalizadas impulsadas por IA.
                {{ else }}
                Fourth-generation educator with MA-TESOL and 10 years in language education and edtech - from teaching graduate-level art and design-focused courses to scoping curriculum for 800,000+ young Chinese learners, designing specialized programs for diplomats, coaching VR instructors, and developing custom AI-powered tools.
                {{ end }}
            </p>
            <div class="location-info">
                <span class="location-item">üìç <strong>Current:</strong> Mountain View, California, USA</span>
                <span class="location-divider">|</span>
                <span class="location-item">üìç <strong>Late 2025/Early 2026:</strong> Medell√≠n, Colombia</span>
            </div>
            <div class="hero-actions">
                {{ if eq .Language.Lang "es" }}
                <a href="/es/writing/" class="btn btn-primary">Ver Escritura</a>
                <a href="/es/cv/" class="btn btn-outline">Ver CV</a>
                {{ else }}
                <a href="/writing/" class="btn btn-primary">View Portfolio</a>
                <a href="/cv/" class="btn btn-outline">View CV</a>
                {{ end }}
                {{ with site.Params.social.linkedin }}
                <a href="{{ . }}" target="_blank" rel="noopener" class="btn btn-linkedin-hero">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    Connect on LinkedIn
                </a>
                {{ end }}
            </div>
        </div>
    </div>
</div>

<section class="features-section">
    <div class="container">
        <h2 class="section-title">{{ if eq .Language.Lang "es" }}Lo Que Hago{{ else }}What I Do{{ end }}</h2>
        <div class="features-grid">
            <div class="feature-card">
                <h3>{{ if eq .Language.Lang "es" }}Desarrollo Curricular{{ else }}Curriculum Development{{ end }}</h3>
                <p>{{ if eq .Language.Lang "es" }}Dise√±ando e implementando programas educativos escalables para m√°s de 800,000 estudiantes globalmente{{ else }}Designing and implementing scalable educational programs for 800,000+ learners globally{{ end }}</p>
                <a href="/services/" class="feature-link">Learn More ‚Üí</a>
            </div>
            <div class="feature-card">
                <h3>{{ if eq .Language.Lang "es" }}Estrategia EdTech{{ else }}EdTech Strategy{{ end }}</h3>
                <p>{{ if eq .Language.Lang "es" }}Integrando IA y VR/AR para crear experiencias de aprendizaje personalizadas y efectivas{{ else }}Integrating AI and VR/AR to create personalized, effective learning experiences{{ end }}</p>
                <a href="/services/" class="feature-link">Learn More ‚Üí</a>
            </div>
            <div class="feature-card">
                <h3>{{ if eq .Language.Lang "es" }}Desarrollo Profesional{{ else }}Professional Development{{ end }}</h3>
                <p>{{ if eq .Language.Lang "es" }}Capacitando educadores en pedagog√≠as innovadoras y tecnolog√≠as educativas emergentes{{ else }}Training educators in innovative pedagogies and emerging educational technologies{{ end }}</p>
                <a href="/services/" class="feature-link">Learn More ‚Üí</a>
            </div>
            <div class="feature-card">
                <h3>{{ if eq .Language.Lang "es" }}Evaluaci√≥n de Programas{{ else }}Program Evaluation{{ end }}</h3>
                <p>{{ if eq .Language.Lang "es" }}Midiendo y mejorando el impacto educativo a trav√©s de an√°lisis basados en datos{{ else }}Measuring and improving educational impact through data-driven analysis{{ end }}</p>
                <a href="/services/" class="feature-link">Learn More ‚Üí</a>
            </div>
        </div>
    </div>
</section>

<section class="portfolio-preview">
    <div class="container">
        <h2 class="section-title">Featured Projects</h2>
        <div class="projects-grid" id="featured-projects">
            <!-- Projects will be loaded via API -->
            <div class="project-skeleton">
                <div class="skeleton-image"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
            <div class="project-skeleton">
                <div class="skeleton-image"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
            <div class="project-skeleton">
                <div class="skeleton-image"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
        </div>
        <div class="section-footer">
            {{ if eq .Language.Lang "es" }}
            <a href="/es/writing/" class="btn btn-secondary">Ver Toda la Escritura</a>
            {{ else }}
            <a href="/writing/" class="btn btn-secondary">View All Writing</a>
            {{ end }}
        </div>
    </div>
</section>

<section class="skills-section">
    <div class="container">
        <h2 class="section-title">Tech Stack</h2>
        <div class="skills-grid" id="skills-list">
            <!-- Skills will be loaded via API -->
            <div class="skill-skeleton"></div>
            <div class="skill-skeleton"></div>
            <div class="skill-skeleton"></div>
            <div class="skill-skeleton"></div>
        </div>
    </div>
</section>


<script>
// API Base URL - Using port 3334 where our CMS backend runs
const API_BASE = 'http://localhost:3334/api';

// Load featured projects
async function loadFeaturedProjects() {
    try {
        const response = await fetch(`${API_BASE}/portfolio/projects?featured=true&limit=3`);
        
        // Handle 401 errors gracefully
        if (response.status === 401) {
            console.info('Portfolio API requires authentication, showing demo content');
            loadDemoProjects();
            return;
        }
        
        const data = await response.json();
        
        const container = document.getElementById('featured-projects');
        
        if (data.projects && data.projects.length > 0) {
            container.innerHTML = data.projects.map(project => `
                <div class="project-card">
                    <div class="project-image">
                        ${project.image ? 
                            `<img src="${project.image}" alt="${project.title}">` : 
                            `<div class="placeholder-image">üé®</div>`
                        }
                    </div>
                    <div class="project-content">
                        <h3>${project.title}</h3>
                        <p>${project.description || 'No description available'}</p>
                        <div class="project-tech">
                            ${project.technologies ? project.technologies.slice(0, 3).map(tech => 
                                `<span class="tech-tag">${tech}</span>`
                            ).join('') : ''}
                        </div>
                        <a href="/writing/${project.slug || ''}" class="project-link">View Project ‚Üí</a>
                    </div>
                </div>
            `).join('');
        } else {
            loadDemoProjects();
        }
    } catch (error) {
        console.error('Error loading projects:', error);
        loadDemoProjects();
    }
}

// Load demo projects when API is unavailable
function loadDemoProjects() {
    const container = document.getElementById('featured-projects');
    container.innerHTML = `
        <div class="project-card">
            <div class="project-image">
                <div class="placeholder-image">üéµ</div>
            </div>
            <div class="project-content">
                <h3>Audio Portfolio</h3>
                <p>Explore my collection of audio projects, soundscapes, and musical compositions.</p>
                <div class="project-tech">
                    <span class="tech-tag">Audio</span>
                    <span class="tech-tag">Sound Design</span>
                    <span class="tech-tag">Music</span>
                </div>
                <a href="/writing/sounds/" class="project-link">View Audio Work ‚Üí</a>
            </div>
        </div>
        <div class="project-card">
            <div class="project-image">
                <div class="placeholder-image">üé®</div>
            </div>
            <div class="project-content">
                <h3>Visual Design</h3>
                <p>Browse through my visual design work, graphics, and creative projects.</p>
                <div class="project-tech">
                    <span class="tech-tag">Design</span>
                    <span class="tech-tag">Graphics</span>
                    <span class="tech-tag">Visual Arts</span>
                </div>
                <a href="/writing/visuals/" class="project-link">View Design Work ‚Üí</a>
            </div>
        </div>
        <div class="project-card">
            <div class="project-image">
                <div class="placeholder-image">‚úçÔ∏è</div>
            </div>
            <div class="project-content">
                <h3>Writing Portfolio</h3>
                <p>Read my articles, blog posts, and written content across various topics.</p>
                <div class="project-tech">
                    <span class="tech-tag">Writing</span>
                    <span class="tech-tag">Content</span>
                    <span class="tech-tag">Articles</span>
                </div>
                <a href="/writing/poetry/" class="project-link">View Poetry ‚Üí</a>
            </div>
        </div>
    `;
}

// Load skills
async function loadSkills() {
    try {
        const response = await fetch(`${API_BASE}/portfolio/skills`);
        
        // Handle 401 errors gracefully
        if (response.status === 401) {
            console.info('Skills API requires authentication, showing demo content');
            loadDemoSkills();
            return;
        }
        
        const data = await response.json();
        
        const container = document.getElementById('skills-list');
        
        if (data.skills && data.skills.length > 0) {
            // Group skills by category
            const grouped = data.skills.reduce((acc, skill) => {
                const category = skill.category || 'Other';
                if (!acc[category]) acc[category] = [];
                acc[category].push(skill);
                return acc;
            }, {});
            
            container.innerHTML = Object.entries(grouped).map(([category, skills]) => `
                <div class="skill-category">
                    <h4>${category}</h4>
                    <div class="skill-tags">
                        ${skills.map(skill => `
                            <div class="skill-tag">
                                <span class="skill-name">${skill.name}</span>
                                ${skill.level ? `
                                    <div class="skill-level">
                                        <div class="skill-progress" style="width: ${skill.level}%"></div>
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        } else {
            loadDemoSkills();
        }
    } catch (error) {
        console.error('Error loading skills:', error);
        loadDemoSkills();
    }
}

// Load demo skills when API is unavailable
function loadDemoSkills() {
    const container = document.getElementById('skills-list');
    container.innerHTML = `
        <div class="skill-category">
            <h4>Frontend Development</h4>
            <div class="skill-tags">
                <div class="skill-tag"><span class="skill-name">HTML/CSS</span></div>
                <div class="skill-tag"><span class="skill-name">JavaScript</span></div>
                <div class="skill-tag"><span class="skill-name">React</span></div>
                <div class="skill-tag"><span class="skill-name">Vue.js</span></div>
            </div>
        </div>
        <div class="skill-category">
            <h4>Backend Development</h4>
            <div class="skill-tags">
                <div class="skill-tag"><span class="skill-name">Node.js</span></div>
                <div class="skill-tag"><span class="skill-name">Express</span></div>
                <div class="skill-tag"><span class="skill-name">MongoDB</span></div>
                <div class="skill-tag"><span class="skill-name">PostgreSQL</span></div>
            </div>
        </div>
        <div class="skill-category">
            <h4>Design & Audio</h4>
            <div class="skill-tags">
                <div class="skill-tag"><span class="skill-name">Adobe Creative Suite</span></div>
                <div class="skill-tag"><span class="skill-name">Figma</span></div>
                <div class="skill-tag"><span class="skill-name">Audio Production</span></div>
                <div class="skill-tag"><span class="skill-name">Sound Design</span></div>
            </div>
        </div>
        <div class="skill-category">
            <h4>DevOps & Tools</h4>
            <div class="skill-tags">
                <div class="skill-tag"><span class="skill-name">Docker</span></div>
                <div class="skill-tag"><span class="skill-name">Git</span></div>
                <div class="skill-tag"><span class="skill-name">CI/CD</span></div>
                <div class="skill-tag"><span class="skill-name">AWS</span></div>
            </div>
        </div>
    `;
}


// Load data on page load
document.addEventListener('DOMContentLoaded', () => {
    loadFeaturedProjects();
    loadSkills();
});
</script>

<style>
/* Hero Section */
.hero-section {
    min-height: 85vh;
    display: flex;
    align-items: center;
    background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-bg) 100%);
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid var(--color-border);
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 20%, var(--color-primary-light) 0%, transparent 50%);
    opacity: 0.05;
    pointer-events: none;
}

.hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
    max-width: 48rem;
    margin: 0 auto;
    padding: var(--space-3xl) var(--space-md);
}

.hero-title {
    font-size: 3.75rem;
    font-weight: 800;
    margin-bottom: var(--space-xl);
    line-height: 1.1;
    color: var(--color-text-primary);
    animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.gradient-text {
    color: var(--color-primary);
    display: block;
    line-height: 1.1;
}

.subtitle {
    display: block;
    font-size: 1.5rem;
    font-weight: 400;
    margin-top: var(--space-md);
    color: var(--color-text-secondary);
    opacity: 0.8;
}

.tagline {
    font-size: 1.125rem;
    font-weight: 500;
    color: var(--color-primary);
    margin: var(--space-lg) auto;
    max-width: 36rem;
    line-height: 1.4;
    letter-spacing: -0.01em;
}

.hero-description {
    font-size: 1.25rem;
    line-height: 1.6;
    margin-bottom: var(--space-xl);
    color: var(--color-text-secondary);
    max-width: 48rem;
    margin-left: auto;
    margin-right: auto;
}

.location-info {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-lg);
    margin-bottom: var(--space-2xl);
    font-size: 1rem;
    color: var(--color-text-secondary);
    flex-wrap: wrap;
}

.location-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.location-divider {
    color: var(--color-border);
    display: none;
}

@media (min-width: 768px) {
    .location-divider {
        display: inline;
    }
}

.hero-actions {
    display: flex;
    gap: var(--space-lg);
    justify-content: center;
    flex-wrap: wrap;
}

/* Professional Button Styles */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-lg) var(--space-2xl);
    border-radius: var(--radius-lg);
    font-weight: 600;
    font-size: 1rem;
    text-decoration: none;
    border: 1px solid transparent;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    min-width: 10rem;
    text-align: center;
}

.btn-primary {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
    box-shadow: var(--shadow-md);
}

.btn-primary:hover {
    background: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    text-decoration: none;
    color: white;
}

.btn-outline {
    background: var(--color-surface);
    color: var(--color-text-primary);
    border-color: var(--color-border);
    box-shadow: var(--shadow-sm);
}

.btn-outline:hover {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    text-decoration: none;
}

.btn-secondary {
    background: var(--color-accent);
    color: white;
    border-color: var(--color-accent);
    box-shadow: var(--shadow-md);
}

.btn-secondary:hover {
    background: var(--color-primary);
    border-color: var(--color-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    text-decoration: none;
    color: white;
}

.btn-linkedin-hero {
    background: #0077b5;
    color: white;
    border-color: #0077b5;
    box-shadow: var(--shadow-md);
}

.btn-linkedin-hero:hover {
    background: #005885;
    border-color: #005885;
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    text-decoration: none;
    color: white;
}

/* Sections */
.section-title {
    text-align: center;
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: var(--space-xl);
    color: var(--color-text-primary);
    letter-spacing: -0.025em;
}

.section-description {
    text-align: center;
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 3rem;
}

/* Features */
.features-section {
    padding: 80px 0;
    background: #f8f9fa;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.feature-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    transition: transform 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

.feature-link {
    display: inline-block;
    margin-top: 1rem;
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    transition: all 0.2s ease;
}

.feature-link:hover {
    transform: translateX(4px);
    color: var(--color-primary-hover);
}

/* Portfolio Preview */
.portfolio-preview {
    padding: 80px 0;
}

.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
}

.project-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    transition: transform 0.3s ease;
}

.project-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

.project-image {
    height: 200px;
    background: #3b82f6;
    display: flex;
    align-items: center;
    justify-content: center;
}

.project-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.placeholder-image {
    font-size: 3rem;
    color: white;
}

.project-content {
    padding: 1.5rem;
}

.project-tech {
    display: flex;
    gap: 0.5rem;
    margin: 1rem 0;
}

.tech-tag {
    background: #f0f0f0;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    color: #666;
}

.project-link {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 600;
}

/* Skills */
.skills-section {
    padding: 80px 0;
    background: #f8f9fa;
}

.skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.skill-category h4 {
    color: #3b82f6;
    margin-bottom: 1rem;
}

.skill-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.skill-tag {
    background: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.skill-level {
    height: 4px;
    background: #e0e0e0;
    border-radius: 2px;
    margin-top: 4px;
    overflow: hidden;
}

.skill-progress {
    height: 100%;
    background: #3b82f6;
    transition: width 1s ease;
}


/* Admin Tools */
.admin-tools {
    padding: 80px 0;
    background: #f8f9fa;
}

.tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.tool-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    text-align: center;
    text-decoration: none;
    color: #333;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
}

.tool-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    color: #3b82f6;
}

.tool-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
}

/* Skeleton Loading */
.project-skeleton,
.skill-skeleton {
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.skeleton-image {
    height: 200px;
    background: #e0e0e0;
    border-radius: 8px 8px 0 0;
}

.skeleton-text {
    height: 20px;
    background: #e0e0e0;
    margin: 1rem;
    border-radius: 4px;
}

.skeleton-text.short {
    width: 60%;
}

.skill-skeleton {
    height: 40px;
    background: #e0e0e0;
    border-radius: 20px;
}

/* Animations */
@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }
    
    .hero-actions {
        flex-direction: column;
    }
    
    .features-grid,
    .projects-grid,
    .tools-grid {
        grid-template-columns: 1fr;
    }
}
</style>
{{ end }}