{{ $title := .Get "title" }}

<div class="links-category">
    <h4>
        {{ $title }}
        <span class="collapse-icon">â–¼</span>
    </h4>
    <div class="link-grid">
        {{ $content := .Inner }}
        {{ $lines := split $content "\n" }}
        {{ range $lines }}
            {{ $line := . }}
            {{ if (findRE `^\*\s*\[` $line) }}
                {{ $line := replaceRE `^\*\s*` "" $line }}
                {{ $line := replaceRE `\{target="_blank"` `target="_blank"` $line }}
                {{ $line := replaceRE `data-tags="([^"]+)"\}` `data-tags="$1"` $line }}
                {{ $line := replaceRE `\}\s*$` "" $line }}
                
                {{ if (findRE `\[([^\]]+)\]\(([^\)]+)\)` $line) }}
                    {{ $matches := findRE `\[([^\]]+)\]\(([^\)]+)\)` $line }}
                    {{ $linkMatch := index $matches 0 }}
                    
                    {{ $text := replaceRE `\[([^\]]+)\].*` "$1" $linkMatch }}
                    {{ $url := replaceRE `.*\(([^\)]+)\).*` "$1" $linkMatch }}
                    
                    {{ $tags := "" }}
                    {{ if (findRE `data-tags="([^"]+)"` $line) }}
                        {{ $tagMatch := findRE `data-tags="([^"]+)"` $line }}
                        {{ if $tagMatch }}
                            {{ $tags = replaceRE `.*data-tags="([^"]+)".*` "$1" (index $tagMatch 0) }}
                        {{ end }}
                    {{ end }}
                    
                    <a href="{{ $url }}" target="_blank" rel="noopener" class="link-item-wrapper" {{ if $tags }}data-tags="{{ $tags }}"{{ end }}>
                        {{ $text }}
                    </a>
                {{ end }}
            {{ end }}
        {{ end }}
    </div>
</div>