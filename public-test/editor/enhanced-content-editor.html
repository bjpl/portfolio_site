<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Content Editor Pro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/github.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/editor-enhanced.css">
</head>
<body>
    <div class="editor-app" id="editorApp">
        <!-- Header Navigation -->
        <header class="editor-header">
            <div class="header-left">
                <h1 class="editor-title">Content Editor Pro</h1>
                <div class="document-info">
                    <span class="document-name" id="documentName">Untitled Document</span>
                    <span class="save-status" id="saveStatus">
                        <span class="status-indicator"></span>
                        <span class="status-text">Saved</span>
                    </span>
                </div>
            </div>
            <div class="header-right">
                <div class="collaboration-indicators" id="collaborators"></div>
                <div class="header-actions">
                    <button class="btn btn-ghost" onclick="toggleVersionHistory()">
                        <i class="icon">üìú</i> History
                    </button>
                    <button class="btn btn-ghost" onclick="toggleComments()">
                        <i class="icon">üí¨</i> Comments <span id="commentCount">0</span>
                    </button>
                    <button class="btn btn-primary" onclick="publishDocument()">
                        <i class="icon">üöÄ</i> Publish
                    </button>
                    <div class="user-menu">
                        <button class="btn btn-ghost user-avatar" onclick="toggleUserMenu()">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%23667eea'/%3E%3Ctext x='16' y='21' text-anchor='middle' fill='white' font-family='Arial' font-size='14' font-weight='bold'%3EU%3C/text%3E%3C/svg%3E" alt="User">
                        </button>
                        <div class="user-menu-dropdown" id="userMenuDropdown">
                            <a href="#" class="menu-item">Profile</a>
                            <a href="#" class="menu-item">Settings</a>
                            <div class="menu-divider"></div>
                            <a href="#" class="menu-item">Sign Out</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Editor Layout -->
        <div class="editor-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-tabs">
                        <button class="tab-btn active" onclick="switchSidebarTab('files')">Files</button>
                        <button class="tab-btn" onclick="switchSidebarTab('outline')">Outline</button>
                        <button class="tab-btn" onclick="switchSidebarTab('search')">Search</button>
                    </div>
                </div>
                
                <!-- Files Tab -->
                <div class="sidebar-content active" id="filesTab">
                    <div class="file-actions">
                        <button class="btn btn-small" onclick="createNewFile()">
                            <i class="icon">‚ûï</i> New
                        </button>
                        <button class="btn btn-small" onclick="openFileDialog()">
                            <i class="icon">üìÅ</i> Open
                        </button>
                    </div>
                    <div class="file-tree" id="fileTree">
                        <!-- File tree will be populated here -->
                    </div>
                </div>
                
                <!-- Outline Tab -->
                <div class="sidebar-content" id="outlineTab">
                    <div class="outline-tree" id="outlineTree">
                        <!-- Document outline will be populated here -->
                    </div>
                </div>
                
                <!-- Search Tab -->
                <div class="sidebar-content" id="searchTab">
                    <div class="search-box">
                        <input type="text" placeholder="Search content..." id="searchInput">
                        <button onclick="performSearch()">üîç</button>
                    </div>
                    <div class="search-options">
                        <label><input type="checkbox" id="searchRegex"> Regex</label>
                        <label><input type="checkbox" id="searchCaseSensitive"> Case sensitive</label>
                    </div>
                    <div class="search-results" id="searchResults"></div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <!-- Toolbar -->
                <div class="toolbar">
                    <div class="toolbar-group">
                        <button class="tool-btn" onclick="undo()" title="Undo (Ctrl+Z)">
                            <i class="icon">‚Ü∂</i>
                        </button>
                        <button class="tool-btn" onclick="redo()" title="Redo (Ctrl+Y)">
                            <i class="icon">‚Ü∑</i>
                        </button>
                    </div>
                    
                    <div class="toolbar-group">
                        <select class="format-select" onchange="applyFormat(this.value)">
                            <option value="">Format</option>
                            <option value="h1">Heading 1</option>
                            <option value="h2">Heading 2</option>
                            <option value="h3">Heading 3</option>
                            <option value="p">Paragraph</option>
                            <option value="blockquote">Quote</option>
                        </select>
                    </div>
                    
                    <div class="toolbar-group">
                        <button class="tool-btn" onclick="toggleBold()" title="Bold (Ctrl+B)">
                            <i class="icon"><b>B</b></i>
                        </button>
                        <button class="tool-btn" onclick="toggleItalic()" title="Italic (Ctrl+I)">
                            <i class="icon"><em>I</em></i>
                        </button>
                        <button class="tool-btn" onclick="toggleStrikethrough()" title="Strikethrough">
                            <i class="icon"><s>S</s></i>
                        </button>
                    </div>
                    
                    <div class="toolbar-group">
                        <button class="tool-btn" onclick="insertLink()" title="Insert Link (Ctrl+K)">
                            <i class="icon">üîó</i>
                        </button>
                        <button class="tool-btn" onclick="insertImage()" title="Insert Image">
                            <i class="icon">üñºÔ∏è</i>
                        </button>
                        <button class="tool-btn" onclick="insertTable()" title="Insert Table">
                            <i class="icon">‚äû</i>
                        </button>
                        <button class="tool-btn" onclick="insertCodeBlock()" title="Code Block">
                            <i class="icon">üíª</i>
                        </button>
                    </div>
                    
                    <div class="toolbar-group">
                        <button class="tool-btn" onclick="insertList('ul')" title="Bullet List">
                            <i class="icon">‚Ä¢ ‚Ä¢ ‚Ä¢</i>
                        </button>
                        <button class="tool-btn" onclick="insertList('ol')" title="Numbered List">
                            <i class="icon">1. 2. 3.</i>
                        </button>
                        <button class="tool-btn" onclick="insertTodo()" title="Todo List">
                            <i class="icon">‚òë</i>
                        </button>
                    </div>
                    
                    <div class="toolbar-group">
                        <button class="tool-btn" onclick="togglePreview()" title="Toggle Preview">
                            <i class="icon">üëÅÔ∏è</i>
                        </button>
                        <button class="tool-btn" onclick="toggleFocusMode()" title="Focus Mode">
                            <i class="icon">üéØ</i>
                        </button>
                    </div>
                    
                    <div class="toolbar-group ml-auto">
                        <div class="word-count" id="wordCount">0 words</div>
                        <div class="reading-time" id="readingTime">0 min read</div>
                    </div>
                </div>

                <!-- Editor Container -->
                <div class="editor-container">
                    <!-- Editor Pane -->
                    <div class="editor-pane" id="editorPane">
                        <div class="editor-metadata">
                            <div class="metadata-row">
                                <input type="text" class="title-input" id="titleInput" placeholder="Document Title">
                                <input type="text" class="slug-input" id="slugInput" placeholder="URL slug (auto-generated)">
                            </div>
                            <div class="metadata-row">
                                <input type="text" class="description-input" id="descriptionInput" placeholder="Description">
                                <input type="text" class="tags-input" id="tagsInput" placeholder="Tags (comma-separated)">
                            </div>
                            <div class="metadata-row">
                                <select class="category-select" id="categorySelect">
                                    <option value="">Select Category</option>
                                    <option value="blog">Blog</option>
                                    <option value="writing">Writing</option>
                                    <option value="tools">Tools</option>
                                    <option value="photography">Photography</option>
                                    <option value="me">About Me</option>
                                </select>
                                <div class="publish-options">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="draftCheckbox"> Save as Draft
                                    </label>
                                    <input type="datetime-local" id="publishDate" title="Publish Date">
                                </div>
                            </div>
                        </div>
                        
                        <div class="editor-wrapper">
                            <textarea id="editor" placeholder="Start writing your content..."></textarea>
                        </div>
                    </div>

                    <!-- Preview Pane -->
                    <div class="preview-pane" id="previewPane">
                        <div class="preview-header">
                            <div class="preview-tabs">
                                <button class="tab-btn active" onclick="switchPreviewTab('preview')">Preview</button>
                                <button class="tab-btn" onclick="switchPreviewTab('seo')">SEO</button>
                                <button class="tab-btn" onclick="switchPreviewTab('analytics')">Analytics</button>
                            </div>
                        </div>
                        
                        <div class="preview-content active" id="previewContent">
                            <div class="preview-document" id="previewDocument">
                                <div class="preview-title" id="previewTitle">Document Preview</div>
                                <div class="preview-meta" id="previewMeta"></div>
                                <div class="preview-body" id="previewBody">
                                    <p>Start writing to see preview...</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="preview-content" id="seoContent">
                            <div class="seo-analysis" id="seoAnalysis">
                                <!-- SEO analysis will be populated here -->
                            </div>
                        </div>
                        
                        <div class="preview-content" id="analyticsContent">
                            <div class="content-analytics" id="contentAnalytics">
                                <!-- Content analytics will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Comments Panel -->
            <aside class="comments-panel" id="commentsPanel">
                <div class="comments-header">
                    <h3>Comments & Suggestions</h3>
                    <button class="btn btn-ghost" onclick="toggleComments()">√ó</button>
                </div>
                <div class="comments-list" id="commentsList">
                    <!-- Comments will be populated here -->
                </div>
                <div class="comments-input">
                    <textarea placeholder="Add a comment..." id="commentInput"></textarea>
                    <button class="btn btn-primary" onclick="addComment()">Comment</button>
                </div>
            </aside>

            <!-- Version History Panel -->
            <aside class="version-panel" id="versionPanel">
                <div class="version-header">
                    <h3>Version History</h3>
                    <button class="btn btn-ghost" onclick="toggleVersionHistory()">√ó</button>
                </div>
                <div class="version-list" id="versionList">
                    <!-- Version history will be populated here -->
                </div>
            </aside>
        </div>

        <!-- Modals -->
        <div class="modal" id="linkModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Insert Link</h3>
                    <button class="modal-close" onclick="closeModal('linkModal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Link Text</label>
                        <input type="text" id="linkText" placeholder="Link text">
                    </div>
                    <div class="form-group">
                        <label>URL</label>
                        <input type="url" id="linkUrl" placeholder="https://example.com">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="linkNewTab"> Open in new tab
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ghost" onclick="closeModal('linkModal')">Cancel</button>
                    <button class="btn btn-primary" onclick="insertLinkConfirm()">Insert Link</button>
                </div>
            </div>
        </div>

        <div class="modal" id="imageModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Insert Image</h3>
                    <button class="modal-close" onclick="closeModal('imageModal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="image-upload-area" id="imageUploadArea">
                        <div class="upload-placeholder">
                            <i class="icon">üñºÔ∏è</i>
                            <p>Drag and drop an image here, or click to browse</p>
                            <input type="file" id="imageFileInput" accept="image/*" style="display: none;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Image URL (alternative to upload)</label>
                        <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label>Alt Text</label>
                        <input type="text" id="imageAlt" placeholder="Describe the image">
                    </div>
                    <div class="form-group">
                        <label>Caption (optional)</label>
                        <input type="text" id="imageCaption" placeholder="Image caption">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-ghost" onclick="closeModal('imageModal')">Cancel</button>
                    <button class="btn btn-primary" onclick="insertImageConfirm()">Insert Image</button>
                </div>
            </div>
        </div>

        <!-- Floating Toolbar for Selections -->
        <div class="floating-toolbar" id="floatingToolbar">
            <button onclick="toggleBold()" title="Bold">B</button>
            <button onclick="toggleItalic()" title="Italic">I</button>
            <button onclick="insertLink()" title="Link">üîó</button>
            <button onclick="insertComment()" title="Comment">üí¨</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/mode/overlay.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="js/editor-core.js"></script>
    <script src="js/editor-collaboration.js"></script>
    <script src="js/editor-versions.js"></script>
    <script src="js/editor-comments.js"></script>
    <script src="js/editor-seo.js"></script>
    <script src="js/editor-autosave.js"></script>
</body>
</html>