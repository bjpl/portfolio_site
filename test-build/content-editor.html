<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Content Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 24px;
            color: #5b21b6;
        }
        
        .editor-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 200px);
        }
        
        .editor-panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }
        
        .panel-header {
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #5b21b6;
        }
        
        .toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 8px 16px;
            background: #5b21b6;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        button:hover {
            background: #4c1d95;
        }
        
        button.secondary {
            background: #6b7280;
        }
        
        button.secondary:hover {
            background: #4b5563;
        }
        
        textarea {
            flex: 1;
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
        }
        
        textarea:focus {
            border-color: #5b21b6;
        }
        
        #preview {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            background: #fafafa;
        }
        
        #preview h1 { font-size: 2em; margin: 0.67em 0; }
        #preview h2 { font-size: 1.5em; margin: 0.75em 0; }
        #preview h3 { font-size: 1.17em; margin: 0.83em 0; }
        #preview p { margin: 1em 0; }
        #preview ul, #preview ol { margin: 1em 0; padding-left: 2em; }
        #preview blockquote {
            margin: 1em 0;
            padding: 0.5em 1em;
            border-left: 4px solid #5b21b6;
            background: #f3f4f6;
        }
        #preview code {
            background: #e5e7eb;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
        }
        #preview pre {
            background: #1f2937;
            color: #f3f4f6;
            padding: 1em;
            border-radius: 4px;
            overflow-x: auto;
        }
        #preview pre code {
            background: none;
            color: inherit;
        }
        
        .status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #10b981;
            color: white;
            border-radius: 4px;
            display: none;
        }
        
        .metadata {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .metadata input {
            padding: 8px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .metadata input:focus {
            outline: none;
            border-color: #5b21b6;
        }
        
        @media (max-width: 768px) {
            .editor-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìù Simple Content Editor</h1>
        </header>
        
        <div class="editor-container">
            <div class="editor-panel">
                <div class="panel-header">Markdown Editor</div>
                
                <div class="metadata">
                    <input type="text" id="title" placeholder="Title">
                    <input type="text" id="description" placeholder="Description">
                    <input type="text" id="tags" placeholder="Tags (comma-separated)">
                    <input type="text" id="category" placeholder="Category">
                </div>
                
                <div class="toolbar">
                    <select onchange="insertTemplate(this.value); this.value='';" style="padding: 8px; margin-right: 10px;">
                        <option value="">Quick Templates...</option>
                        <option value="blog">Blog Post</option>
                        <option value="tool">Tool/Strategy</option>
                        <option value="poem">Poem</option>
                        <option value="project">Portfolio</option>
                    </select>
                    <button onclick="insertMarkdown('# ', '\n')">H1</button>
                    <button onclick="insertMarkdown('## ', '\n')">H2</button>
                    <button onclick="insertMarkdown('### ', '\n')">H3</button>
                    <button onclick="insertMarkdown('**', '**')">Bold</button>
                    <button onclick="insertMarkdown('*', '*')">Italic</button>
                    <button onclick="insertMarkdown('[', '](url)')">Link</button>
                    <button onclick="insertMarkdown('![alt](', ')')">Image</button>
                    <button onclick="insertMarkdown('`', '`')">Code</button>
                    <button onclick="insertMarkdown('\n> ', '\n')">Quote</button>
                    <button onclick="insertList()">List</button>
                    <button onclick="insertHR()">---</button>
                    <button class="secondary" onclick="clearEditor()">Clear</button>
                    <button class="secondary" onclick="downloadMarkdown()">Save</button>
                </div>
                
                <textarea id="editor" placeholder="Start writing in Markdown...">## Introduction

Write your content here...

### Key Points

- First point
- Second point
- Third point

### Conclusion

Wrap up your thoughts...</textarea>
            </div>
            
            <div class="editor-panel">
                <div class="panel-header">Live Preview</div>
                <div id="preview"></div>
            </div>
        </div>
    </div>
    
    <div class="status" id="status">Saved!</div>
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        const editor = document.getElementById('editor');
        const preview = document.getElementById('preview');
        const titleInput = document.getElementById('title');
        const descriptionInput = document.getElementById('description');
        const tagsInput = document.getElementById('tags');
        const categoryInput = document.getElementById('category');
        
        // Auto-save to localStorage
        function saveToLocal() {
            const content = {
                markdown: editor.value,
                title: titleInput.value,
                description: descriptionInput.value,
                tags: tagsInput.value,
                category: categoryInput.value,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('contentDraft', JSON.stringify(content));
            showStatus('Auto-saved');
        }
        
        // Load from localStorage
        function loadFromLocal() {
            const saved = localStorage.getItem('contentDraft');
            if (saved) {
                const content = JSON.parse(saved);
                editor.value = content.markdown || '';
                titleInput.value = content.title || '';
                descriptionInput.value = content.description || '';
                tagsInput.value = content.tags || '';
                categoryInput.value = content.category || '';
                updatePreview();
            }
        }
        
        // Update preview
        function updatePreview() {
            const markdown = editor.value;
            const html = marked.parse(markdown);
            
            // Add metadata to preview
            const metadata = titleInput.value || descriptionInput.value ? `
                <div style="background: #f3f4f6; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                    ${titleInput.value ? `<h1 style="margin: 0 0 10px 0; color: #5b21b6;">${titleInput.value}</h1>` : ''}
                    ${descriptionInput.value ? `<p style="margin: 0; color: #6b7280;">${descriptionInput.value}</p>` : ''}
                    ${tagsInput.value ? `<p style="margin: 10px 0 0 0; font-size: 14px;">üè∑Ô∏è ${tagsInput.value}</p>` : ''}
                </div>
            ` : '';
            
            preview.innerHTML = metadata + html;
        }
        
        // Insert markdown
        function insertMarkdown(before, after) {
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const text = editor.value;
            const selected = text.substring(start, end);
            
            editor.value = text.substring(0, start) + before + selected + after + text.substring(end);
            editor.focus();
            editor.selectionStart = start + before.length;
            editor.selectionEnd = start + before.length + selected.length;
            
            updatePreview();
            saveToLocal();
        }
        
        // Insert list
        function insertList() {
            const start = editor.selectionStart;
            const text = editor.value;
            const list = '\n- Item 1\n- Item 2\n- Item 3\n';
            
            editor.value = text.substring(0, start) + list + text.substring(start);
            editor.focus();
            updatePreview();
            saveToLocal();
        }
        
        // Insert horizontal rule
        function insertHR() {
            const start = editor.selectionStart;
            const text = editor.value;
            const hr = '\n\n---\n\n';
            
            editor.value = text.substring(0, start) + hr + text.substring(start);
            editor.focus();
            updatePreview();
            saveToLocal();
        }
        
        // Insert template
        function insertTemplate(type) {
            if (!type) return;
            
            const templates = {
                blog: `## The Problem

Describe the issue or challenge...

## The Solution  

How to address it...

## Key Takeaways

1. First point
2. Second point
3. Third point

## Next Steps

What to do next...`,
                tool: `## What it is

Brief description...

## How to use it

Step-by-step instructions...

## Quick Specs

- **Cost**: 
- **Platform**: 
- **Best for**: 

## Pro Tips

1. Tip one
2. Tip two`,
                poem: `<div class="poem-original">

First line
Second line
Third line

New stanza here
Continues flowing
Until complete

</div>

<div class="poem-translation">

*Primera l√≠nea*
*Segunda l√≠nea*  
*Tercera l√≠nea*

*Nueva estrofa aqu√≠*
*Contin√∫a fluyendo*
*Hasta completarse*

</div>`,
                project: `## Project Overview

What this project accomplished...

## Challenge

The problem that needed solving...

## Solution

How it was solved...

## Technologies

- Tech 1
- Tech 2
- Tech 3

## Results

What was achieved...`
            };
            
            if (templates[type]) {
                const start = editor.selectionStart;
                const text = editor.value;
                editor.value = text.substring(0, start) + '\n\n' + templates[type] + '\n\n' + text.substring(start);
                editor.focus();
                updatePreview();
                saveToLocal();
            }
        }
        
        // Clear editor
        function clearEditor() {
            if (confirm('Clear all content? This cannot be undone.')) {
                editor.value = '';
                titleInput.value = '';
                descriptionInput.value = '';
                tagsInput.value = '';
                categoryInput.value = '';
                updatePreview();
                localStorage.removeItem('contentDraft');
            }
        }
        
        // Download markdown
        function downloadMarkdown() {
            const title = titleInput.value || 'untitled';
            const slug = title.toLowerCase().replace(/[^a-z0-9]+/g, '-');
            const date = new Date().toISOString();
            
            const frontmatter = `---
title: "${titleInput.value}"
date: ${date}
description: "${descriptionInput.value}"
tags: [${tagsInput.value.split(',').map(t => `"${t.trim()}"`).join(', ')}]
categories: ["${categoryInput.value}"]
draft: false
---

`;
            
            const content = frontmatter + editor.value;
            const blob = new Blob([content], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${slug}.md`;
            a.click();
            
            showStatus('Downloaded!');
        }
        
        // Show status message
        function showStatus(message) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.display = 'block';
            setTimeout(() => {
                status.style.display = 'none';
            }, 2000);
        }
        
        // Event listeners
        editor.addEventListener('input', () => {
            updatePreview();
            saveToLocal();
        });
        
        [titleInput, descriptionInput, tagsInput, categoryInput].forEach(input => {
            input.addEventListener('input', () => {
                updatePreview();
                saveToLocal();
            });
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'b':
                        e.preventDefault();
                        insertMarkdown('**', '**');
                        break;
                    case 'i':
                        e.preventDefault();
                        insertMarkdown('*', '*');
                        break;
                    case 'k':
                        e.preventDefault();
                        insertMarkdown('[', '](url)');
                        break;
                    case 's':
                        e.preventDefault();
                        downloadMarkdown();
                        break;
                }
            }
        });
        
        // Initialize
        loadFromLocal();
        updatePreview();
    </script>
</body>
</html>