<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/admin/css/admin-style.css">
    <style>
        .settings-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .settings-header {
            margin-bottom: 30px;
        }

        .settings-header h1 {
            margin: 0;
            color: #2c3e50;
            font-size: 28px;
        }

        .settings-nav {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .settings-nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            border-bottom: 1px solid #eee;
        }

        .settings-nav-item {
            flex: 1;
        }

        .settings-nav-link {
            display: block;
            padding: 15px 20px;
            text-decoration: none;
            color: #7f8c8d;
            text-align: center;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .settings-nav-link:hover {
            background: #f8f9fa;
            color: #2c3e50;
        }

        .settings-nav-link.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f8f9fa;
        }

        .settings-content {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .settings-section {
            display: none;
            padding: 30px;
        }

        .settings-section.active {
            display: block;
        }

        .setting-group {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .setting-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .setting-group h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 18px;
        }

        .setting-group p {
            color: #7f8c8d;
            margin: 0 0 15px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            align-items: center;
        }

        .form-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group.inline {
            flex-direction: row;
            align-items: center;
            gap: 10px;
        }

        .form-group label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }

        .form-input, .form-select, .form-textarea {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .form-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: #ddd;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-switch.active {
            background: #667eea;
        }

        .form-switch::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .form-switch.active::before {
            transform: translateX(25px);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #eee;
            margin: 0 -30px -30px -30px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            border: 2px solid #ddd;
            cursor: pointer;
        }

        .file-upload-area {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .file-upload-area:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-upload-area.dragover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .file-upload-icon {
            font-size: 48px;
            color: #bdc3c7;
            margin-bottom: 15px;
        }

        .notification {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .notification.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .notification.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .notification.warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .settings-nav-list {
                flex-direction: column;
            }

            .form-row {
                flex-direction: column;
                align-items: stretch;
            }

            .form-actions {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="settings-container">
        <!-- Navigation will be inserted here by admin-nav.js -->
        
        <div class="settings-header">
            <h1><i class="fas fa-cog"></i> Settings</h1>
        </div>

        <div class="settings-nav">
            <ul class="settings-nav-list">
                <li class="settings-nav-item">
                    <a href="#general" class="settings-nav-link active" data-section="general">
                        <i class="fas fa-home"></i> General
                    </a>
                </li>
                <li class="settings-nav-item">
                    <a href="#appearance" class="settings-nav-link" data-section="appearance">
                        <i class="fas fa-palette"></i> Appearance
                    </a>
                </li>
                <li class="settings-nav-item">
                    <a href="#security" class="settings-nav-link" data-section="security">
                        <i class="fas fa-shield-alt"></i> Security
                    </a>
                </li>
                <li class="settings-nav-item">
                    <a href="#backup" class="settings-nav-link" data-section="backup">
                        <i class="fas fa-download"></i> Backup
                    </a>
                </li>
                <li class="settings-nav-item">
                    <a href="#system" class="settings-nav-link" data-section="system">
                        <i class="fas fa-server"></i> System
                    </a>
                </li>
            </ul>
        </div>

        <div class="settings-content">
            <!-- General Settings -->
            <div id="general-section" class="settings-section active">
                <div class="setting-group">
                    <h3>Site Information</h3>
                    <p>Configure basic information about your portfolio website.</p>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="site-title">Site Title</label>
                            <input type="text" id="site-title" class="form-input" value="My Portfolio" placeholder="Enter site title">
                        </div>
                        <div class="form-group">
                            <label for="site-tagline">Tagline</label>
                            <input type="text" id="site-tagline" class="form-input" value="Full Stack Developer" placeholder="Enter tagline">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="site-description">Description</label>
                            <textarea id="site-description" class="form-textarea" placeholder="Enter site description">A passionate full-stack developer creating amazing web experiences.</textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="site-url">Site URL</label>
                            <input type="url" id="site-url" class="form-input" value="https://myportfolio.com" placeholder="https://example.com">
                        </div>
                        <div class="form-group">
                            <label for="admin-email">Admin Email</label>
                            <input type="email" id="admin-email" class="form-input" value="admin@example.com" placeholder="admin@example.com">
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Contact Information</h3>
                    <p>Manage your contact details displayed on the site.</p>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="contact-email">Contact Email</label>
                            <input type="email" id="contact-email" class="form-input" value="hello@example.com" placeholder="hello@example.com">
                        </div>
                        <div class="form-group">
                            <label for="contact-phone">Phone</label>
                            <input type="tel" id="contact-phone" class="form-input" value="+1 (555) 123-4567" placeholder="+1 (555) 123-4567">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="location">Location</label>
                            <input type="text" id="location" class="form-input" value="San Francisco, CA" placeholder="City, Country">
                        </div>
                        <div class="form-group">
                            <label for="timezone">Timezone</label>
                            <select id="timezone" class="form-select">
                                <option value="America/New_York">Eastern Time (ET)</option>
                                <option value="America/Chicago">Central Time (CT)</option>
                                <option value="America/Denver">Mountain Time (MT)</option>
                                <option value="America/Los_Angeles" selected>Pacific Time (PT)</option>
                                <option value="UTC">UTC</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary">Reset</button>
                    <button type="button" class="btn btn-primary" onclick="settings.saveSettings('general')">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>

            <!-- Appearance Settings -->
            <div id="appearance-section" class="settings-section">
                <div class="setting-group">
                    <h3>Theme Configuration</h3>
                    <p>Customize the visual appearance of your portfolio.</p>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="primary-color">Primary Color</label>
                            <div class="color-picker-wrapper">
                                <input type="color" id="primary-color" value="#667eea">
                                <div class="color-preview" style="background-color: #667eea;"></div>
                                <span>#667eea</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="secondary-color">Secondary Color</label>
                            <div class="color-picker-wrapper">
                                <input type="color" id="secondary-color" value="#764ba2">
                                <div class="color-preview" style="background-color: #764ba2;"></div>
                                <span>#764ba2</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group inline">
                            <label>Dark Mode</label>
                            <div class="form-switch" data-switch="dark-mode">
                            </div>
                        </div>
                        <div class="form-group inline">
                            <label>Animations</label>
                            <div class="form-switch active" data-switch="animations">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Logo & Branding</h3>
                    <p>Upload and configure your site logo and branding elements.</p>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Site Logo</label>
                            <div class="file-upload-area" onclick="settings.uploadFile('logo')">
                                <i class="fas fa-cloud-upload-alt file-upload-icon"></i>
                                <p>Click to upload or drag & drop your logo</p>
                                <small>Recommended: 200x60px, PNG or SVG format</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Favicon</label>
                            <div class="file-upload-area" onclick="settings.uploadFile('favicon')">
                                <i class="fas fa-image file-upload-icon"></i>
                                <p>Upload favicon</p>
                                <small>32x32px, ICO or PNG format</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary">Reset to Default</button>
                    <button type="button" class="btn btn-primary" onclick="settings.saveSettings('appearance')">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>

            <!-- Security Settings -->
            <div id="security-section" class="settings-section">
                <div class="setting-group">
                    <h3>Account Security</h3>
                    <p>Manage your account security settings and password.</p>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="current-password">Current Password</label>
                            <input type="password" id="current-password" class="form-input" placeholder="Enter current password">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="new-password">New Password</label>
                            <input type="password" id="new-password" class="form-input" placeholder="Enter new password">
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password" class="form-input" placeholder="Confirm new password">
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Session Management</h3>
                    <p>Configure session timeout and security options.</p>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="session-timeout">Session Timeout (minutes)</label>
                            <select id="session-timeout" class="form-select">
                                <option value="30">30 minutes</option>
                                <option value="60" selected>1 hour</option>
                                <option value="120">2 hours</option>
                                <option value="480">8 hours</option>
                                <option value="1440">24 hours</option>
                            </select>
                        </div>
                        <div class="form-group inline">
                            <label>Remember Login</label>
                            <div class="form-switch active" data-switch="remember-login">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Security Features</h3>
                    <p>Enable additional security features for your admin panel.</p>

                    <div class="form-row">
                        <div class="form-group inline">
                            <label>Two-Factor Authentication</label>
                            <div class="form-switch" data-switch="two-factor">
                            </div>
                        </div>
                        <div class="form-group inline">
                            <label>Login Notifications</label>
                            <div class="form-switch active" data-switch="login-notifications">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-danger" onclick="settings.logoutAllSessions()">
                        <i class="fas fa-sign-out-alt"></i> Logout All Sessions
                    </button>
                    <button type="button" class="btn btn-primary" onclick="settings.saveSettings('security')">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>

            <!-- Backup Settings -->
            <div id="backup-section" class="settings-section">
                <div class="setting-group">
                    <h3>Backup Configuration</h3>
                    <p>Configure automatic backups and export your data.</p>

                    <div class="form-row">
                        <div class="form-group inline">
                            <label>Automatic Backups</label>
                            <div class="form-switch active" data-switch="auto-backup">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="backup-frequency">Backup Frequency</label>
                            <select id="backup-frequency" class="form-select">
                                <option value="daily">Daily</option>
                                <option value="weekly" selected>Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="backup-retention">Keep Backups For</label>
                            <select id="backup-retention" class="form-select">
                                <option value="7">1 week</option>
                                <option value="30" selected>1 month</option>
                                <option value="90">3 months</option>
                                <option value="365">1 year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Last Backup</label>
                            <input type="text" class="form-input" value="2024-01-15 14:30:00" readonly>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Manual Backup</h3>
                    <p>Create and download backups manually.</p>

                    <div class="form-row">
                        <div class="form-group">
                            <button type="button" class="btn btn-primary" onclick="settings.createBackup()">
                                <i class="fas fa-download"></i> Create Backup
                            </button>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-secondary" onclick="settings.restoreBackup()">
                                <i class="fas fa-upload"></i> Restore from Backup
                            </button>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-primary" onclick="settings.saveSettings('backup')">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>

            <!-- System Settings -->
            <div id="system-section" class="settings-section">
                <div class="setting-group">
                    <h3>System Information</h3>
                    <p>View current system status and statistics.</p>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">156</div>
                            <div class="stat-label">Total Content</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">12</div>
                            <div class="stat-label">Projects</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">2.4 GB</div>
                            <div class="stat-label">Storage Used</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">99.9%</div>
                            <div class="stat-label">Uptime</div>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Cache Management</h3>
                    <p>Manage system cache and performance settings.</p>

                    <div class="form-row">
                        <div class="form-group inline">
                            <label>Enable Caching</label>
                            <div class="form-switch active" data-switch="enable-cache">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="cache-duration">Cache Duration (hours)</label>
                            <select id="cache-duration" class="form-select">
                                <option value="1">1 hour</option>
                                <option value="6">6 hours</option>
                                <option value="24" selected>24 hours</option>
                                <option value="168">1 week</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <button type="button" class="btn btn-secondary" onclick="settings.clearCache()">
                                <i class="fas fa-broom"></i> Clear Cache
                            </button>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h3>Maintenance Mode</h3>
                    <p>Enable maintenance mode to temporarily disable public access.</p>

                    <div class="form-row">
                        <div class="form-group inline">
                            <label>Maintenance Mode</label>
                            <div class="form-switch" data-switch="maintenance-mode">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="maintenance-message">Maintenance Message</label>
                            <textarea id="maintenance-message" class="form-textarea" placeholder="We're currently performing maintenance. Please check back soon.">Site is temporarily unavailable for maintenance. We'll be back soon!</textarea>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-danger" onclick="settings.resetSystem()">
                        <i class="fas fa-exclamation-triangle"></i> Reset System
                    </button>
                    <button type="button" class="btn btn-primary" onclick="settings.saveSettings('system')">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/admin/js/admin-nav.js"></script>
    <script>
        class SettingsManager {
            constructor() {
                this.currentSection = 'general';
                this.settings = {
                    general: {},
                    appearance: {},
                    security: {},
                    backup: {},
                    system: {}
                };
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadSettings();
            }

            bindEvents() {
                // Section navigation
                document.querySelectorAll('.settings-nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = e.currentTarget.dataset.section;
                        this.switchSection(section);
                    });
                });

                // Color picker events
                document.querySelectorAll('input[type="color"]').forEach(input => {
                    input.addEventListener('change', (e) => {
                        const preview = e.target.parentElement.querySelector('.color-preview');
                        const span = e.target.parentElement.querySelector('span');
                        if (preview) preview.style.backgroundColor = e.target.value;
                        if (span) span.textContent = e.target.value;
                    });
                });

                // Switch toggles
                document.querySelectorAll('.form-switch').forEach(switchEl => {
                    switchEl.addEventListener('click', (e) => {
                        e.currentTarget.classList.toggle('active');
                    });
                });

                // File upload areas
                document.querySelectorAll('.file-upload-area').forEach(area => {
                    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                        area.addEventListener(eventName, this.handleFileEvent.bind(this));
                    });
                });
            }

            switchSection(section) {
                // Update navigation
                document.querySelectorAll('.settings-nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-section="${section}"]`).classList.add('active');

                // Update content
                document.querySelectorAll('.settings-section').forEach(sectionEl => {
                    sectionEl.classList.remove('active');
                });
                document.getElementById(`${section}-section`).classList.add('active');

                this.currentSection = section;
            }

            handleFileEvent(e) {
                e.preventDefault();
                e.stopPropagation();

                const area = e.currentTarget;

                if (e.type === 'dragenter' || e.type === 'dragover') {
                    area.classList.add('dragover');
                } else if (e.type === 'dragleave') {
                    area.classList.remove('dragover');
                } else if (e.type === 'drop') {
                    area.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    this.handleFiles(files);
                }
            }

            handleFiles(files) {
                if (files.length > 0) {
                    const file = files[0];
                    window.adminNav?.showMessage(`File uploaded: ${file.name}`, 'success');
                }
            }

            uploadFile(type) {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = type === 'logo' ? '.png,.jpg,.jpeg,.svg' : '.ico,.png';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        window.adminNav?.showMessage(`${type} uploaded: ${file.name}`, 'success');
                    }
                };
                input.click();
            }

            loadSettings() {
                // Load saved settings from localStorage or API
                const saved = localStorage.getItem('adminSettings');
                if (saved) {
                    this.settings = { ...this.settings, ...JSON.parse(saved) };
                    this.applySettings();
                }
            }

            applySettings() {
                // Apply loaded settings to form elements
                // This would typically involve setting form values
                // from the loaded settings object
            }

            saveSettings(section) {
                window.adminNav?.showMessage('Saving settings...', 'info');

                // Simulate save delay
                setTimeout(() => {
                    // Collect form data for the section
                    const sectionData = this.collectSectionData(section);
                    this.settings[section] = sectionData;

                    // Save to localStorage (in real app, this would be an API call)
                    localStorage.setItem('adminSettings', JSON.stringify(this.settings));

                    window.adminNav?.showMessage('Settings saved successfully!', 'success');
                }, 1000);
            }

            collectSectionData(section) {
                const sectionEl = document.getElementById(`${section}-section`);
                const data = {};

                // Collect form inputs
                sectionEl.querySelectorAll('input, select, textarea').forEach(input => {
                    if (input.id) {
                        if (input.type === 'checkbox') {
                            data[input.id] = input.checked;
                        } else {
                            data[input.id] = input.value;
                        }
                    }
                });

                // Collect switch states
                sectionEl.querySelectorAll('.form-switch').forEach(switchEl => {
                    const switchName = switchEl.dataset.switch;
                    if (switchName) {
                        data[switchName] = switchEl.classList.contains('active');
                    }
                });

                return data;
            }

            createBackup() {
                window.adminNav?.showMessage('Creating backup...', 'info');
                
                setTimeout(() => {
                    const backupData = {
                        timestamp: new Date().toISOString(),
                        settings: this.settings,
                        content: 'Sample backup data'
                    };

                    const blob = new Blob([JSON.stringify(backupData, null, 2)], {
                        type: 'application/json'
                    });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `portfolio-backup-${new Date().toISOString().split('T')[0]}.json`;
                    a.click();

                    window.adminNav?.showMessage('Backup created and downloaded!', 'success');
                }, 2000);
            }

            restoreBackup() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            try {
                                const backupData = JSON.parse(e.target.result);
                                this.settings = backupData.settings || {};
                                this.applySettings();
                                window.adminNav?.showMessage('Backup restored successfully!', 'success');
                            } catch (error) {
                                window.adminNav?.showMessage('Invalid backup file format.', 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }

            clearCache() {
                window.adminNav?.showMessage('Clearing cache...', 'info');
                
                setTimeout(() => {
                    window.adminNav?.showMessage('Cache cleared successfully!', 'success');
                }, 1500);
            }

            logoutAllSessions() {
                if (confirm('Are you sure you want to logout all active sessions? This will require you to login again.')) {
                    window.adminNav?.showMessage('Logging out all sessions...', 'info');
                    
                    setTimeout(() => {
                        localStorage.removeItem('adminToken');
                        window.location.href = '/admin/login.html';
                    }, 2000);
                }
            }

            resetSystem() {
                if (confirm('Are you sure you want to reset the system? This action cannot be undone.')) {
                    window.adminNav?.showMessage('Resetting system...', 'warning');
                    
                    setTimeout(() => {
                        localStorage.clear();
                        window.adminNav?.showMessage('System reset complete. Please refresh the page.', 'success');
                    }, 3000);
                }
            }
        }

        // Initialize settings manager when page loads
        document.addEventListener('DOMContentLoaded', function() {
            window.settings = new SettingsManager();
        });
    </script>
</body>
</html>