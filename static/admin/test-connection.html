<!DOCTYPE html>
<html>
<head>
    <title>API Connection Test</title>
    <style>
        body { font-family: sans-serif; padding: 40px; }
        .status { padding: 20px; border-radius: 8px; margin: 10px 0; }
        .connected { background: #d4edda; color: #155724; }
        .disconnected { background: #f8d7da; color: #721c24; }
        .simulated { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <h1>Hugo Management Tools - API Status</h1>
    <div id="status" class="status disconnected">
        Checking connection...
    </div>
    <ul id="results"></ul>
    
    <script src="api-client.js"></script>
    <script>
        // Test if API client is loaded
        const statusDiv = document.getElementById('status');
        const resultsUl = document.getElementById('results');
        
        function addResult(text, success) {
            const li = document.createElement('li');
            li.innerHTML = (success ? 'âœ… ' : 'âŒ ') + text;
            resultsUl.appendChild(li);
        }
        
        // Check if hugoAPI exists (from api-client.js)
        if (typeof hugoAPI !== 'undefined') {
            addResult('API client loaded successfully', true);
            
            // Test API connection with correct port
            fetch('http://localhost:3333/api/health')
                .then(response => response.json())
                .then(data => {
                    statusDiv.className = 'status connected';
                    statusDiv.innerHTML = 'ðŸŸ¢ Connected to Backend API<br>Server Status: ' + data.status;
                    addResult('Backend server is running on port 3333', true);
                    addResult('WebSocket available', true);
                })
                .catch(error => {
                    statusDiv.className = 'status simulated';
                    statusDiv.innerHTML = 'ðŸŸ¡ API client loaded but backend not running<br>Run: cd backend && node src/server.js';
                    addResult('Backend server not running - tools will use simulated mode', false);
                    addResult('To start backend: cd backend && node src/server.js', false);
                });
        } else {
            statusDiv.className = 'status disconnected';
            statusDiv.innerHTML = 'ðŸ”´ API Client not loaded - Check api-client.js';
            addResult('API client failed to load', false);
        }
    </script>
</body>
</html>
